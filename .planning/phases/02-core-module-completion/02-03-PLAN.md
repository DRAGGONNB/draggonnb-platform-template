---
phase: 02-core-module-completion
plan: 03
type: execute
wave: 2
depends_on: ["02-01", "02-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Dashboard displays real data from Supabase (verified visually)"
    - "Empty states appear for new organizations with no data"
    - "Email campaign send completes without timeout (functional test)"
  artifacts: []
  key_links: []
---

<objective>
Verify dashboard real data and email campaign sending work correctly.

Purpose: Plans 02-01 and 02-02 modified critical data fetching and email sending code. This checkpoint verifies the changes work correctly before Phase 2 is marked complete.

Output: Verified working dashboard and email flow, or identified issues for gap closure.
</objective>

<execution_context>
@C:\Users\Chris Terblanche\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Chris Terblanche\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-module-completion/02-01-SUMMARY.md
@.planning/phases/02-core-module-completion/02-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Dashboard with real Supabase data and empty states (Plan 02-01)</what-built>
  <how-to-verify>
1. Start the development server:
   ```bash
   npm run dev
   ```

2. Open http://localhost:3000/dashboard in browser

3. **Verify no hardcoded fake data:**
   - Check stat cards do NOT show "87" for posts (should show 0 or real count)
   - Check engagement rate does NOT show "4.8%" if no data (should show 0%)
   - Check revenue does NOT show "R12.5k" hardcoded (should reflect real deals)

4. **Verify empty states:**
   - If your organization has no posts: "Top Performing Posts" should show "No posts yet" with "Create Post" link
   - If your organization has no activity: "Team Activity" should show "No activity yet"
   - Charts with no data should show appropriate empty state message

5. **Verify page loads quickly:**
   - Dashboard should load within 2-3 seconds (parallel queries working)
   - No visible sequential loading of cards

6. **Check browser console:**
   - No errors related to undefined data or null references
  </how-to-verify>
  <resume-signal>Type "dashboard-approved" if working correctly, or describe any issues found</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Email campaign send targeting contacts with batch API (Plan 02-02)</what-built>
  <how-to-verify>
**Note:** This test works even without RESEND_API_KEY configured - emails will be logged to console instead of sent.

1. Ensure dev server is running:
   ```bash
   npm run dev
   ```

2. **Add a test contact to your CRM:**
   - Navigate to http://localhost:3000/crm
   - Add a contact with your own email address
   - Set status to "active"

3. **Create a test campaign:**
   - Navigate to http://localhost:3000/email
   - Create a new campaign with:
     - Subject: "Test Campaign {{first_name}}"
     - Simple HTML content: "&lt;p&gt;Hello {{first_name}}, this is a test.&lt;/p&gt;"
   - Save as draft

4. **Send the campaign:**
   - Click "Send" on the campaign
   - Should complete without timeout
   - Should return success response

5. **Check terminal/console:**
   - If RESEND_API_KEY not configured: Should see "[Email] Would send X emails:" log
   - Should NOT see "from('users')" being queried (contacts should be targeted)

6. **Verify campaign status:**
   - Campaign status should update to "sent"
   - Email sends table should have records

**If RESEND_API_KEY IS configured:**
   - Check your inbox for the test email
   - Email should have your first_name substituted in subject/body
  </how-to-verify>
  <resume-signal>Type "email-approved" if working correctly, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Checkpoint passes when user confirms both:
1. Dashboard shows real data (or proper empty states) with no hardcoded fake values
2. Email campaign send completes successfully, targeting contacts table
</verification>

<success_criteria>
- User types "dashboard-approved" confirming dashboard displays real data
- User types "email-approved" confirming email campaign send works
- No blocking issues identified
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-module-completion/02-03-SUMMARY.md`
</output>
